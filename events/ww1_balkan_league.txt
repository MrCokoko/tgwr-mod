add_namespace = ww1_balkan
#treaty of friendship
country_event = {
	id = ww1_balkan.1
	title = ww1_balkan.1.t
	desc = ww1_balkan.1.d
	picture = ww1_bulgaria_3
	is_triggered_only = yes
	option = {
		name = ww1_balkan.1.a
		set_global_flag = Ser_Bul_treaty
		give_guarantee = FROM
		add_opinion_modifier = {
			target = FROM
			modifier = BUL_treaty_of_friendship
		}
		FROM = {
			give_guarantee = PREV
			add_opinion_modifier = {
				target = PREV
				modifier = BUL_treaty_of_friendship
			}
			country_event = {
				id = ww1_balkan.2
			}
		}
		ai_chance = {
			factor = 1000
		}
	}
	option = {
		name = ww1_balkan.1.b
		set_global_flag = Ser_Bul_treaty_fail
		add_war_support = -0.15
		add_political_power = -200
		country_event = {
			id = ww1_balkan.3
		}
		custom_effect_tooltip = balkan_league_fail_tt
		ai_chance = {
			factor = 1
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

##treaty of friendship success 
country_event = {
	id = ww1_balkan.2
	title = ww1_balkan.2.t
	desc = ww1_balkan.2.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.2.a
	}
}

#treaty of friendship fail
country_event = {
	id = ww1_balkan.3
	title = ww1_balkan.3.t
	desc = ww1_balkan.3.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.3.a
	}
}

#Bulgaria tries to speed things up
country_event = {
	id = ww1_balkan.4
	title = ww1_balkan.4.t
	desc = ww1_balkan.4.d
	is_triggered_only = yes
	# option = {
	# 	name = ww1_balkan.4.a
	# 	set_global_flag = autonomous_macedonia
	# 	custom_effect_tooltip = autonomous_macedonia_tt
	# 	ai_chance = {
	# 		factor = 1
	# 		modifier = {
	# 			factor = 0
	# 			is_historical_focus_on = yes
	# 		}
	# 	}
	# 	BUL = {
	# 		country_event = ww1_balkan.5
	# 	}
		
	# }
	option = {
		name = ww1_balkan.4.b
		set_global_flag = rejected_macedonia
		BUL = {
			country_event = ww1_balkan.11
		}
		ai_chance = {
			factor = 200
		}
	}
}

#Serbia accepts autonomous Macedonia
country_event = {
	id = ww1_balkan.5
	title = ww1_balkan.5.t
	desc = ww1_balkan.5.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.5.a
		set_global_flag = BUL_SER_macedonia_deal_agreed
		BUL = {
			unlock_national_focus = BUL_anti_ottoman_crusade
		}
		GRE = {
			country_event = {
				id = ww1_balkan.6
				days = 3
			}
		}
	}
}

#Greeks notified of their decision
country_event = {
	id = ww1_balkan.6
	title = ww1_balkan.6.t
	desc = ww1_balkan.6.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.6.a
	}
}

#Negotiate the state-Serbia side
country_event = {
	id = ww1_balkan.7
	title = ww1_balkan.7.t
	desc = ww1_balkan.7.d
	is_triggered_only = yes
	option = {
		#Accept
		name = ww1_balkan.7.a
		add_to_variable = {
			bulgarian_opinion = 10
		}
		random_state = {
			limit = {
				has_state_flag = balkan_league_discuss_claim
			}
			add_claim_by = BUL
		}
		BUL = {
			country_event = {
				id = ww1_balkan.9
				days = 5
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					106 = {
						has_state_flag = balkan_league_discuss_claim
					}
					203 = {
						has_state_flag = balkan_league_discuss_claim
						is_historical_focus_on = yes
					}
				}
			}
		}
	}
	option = {
		name = ww1_balkan.7.b
		subtract_from_variable = {
			bulgarian_opinion = -5
		}
		BUL = {
			country_event = {
				id = ww1_balkan.10
				days = 2
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					225 = {
						has_state_flag = balkan_league_discuss_claim
					}
					759 = {
						has_state_flag = balkan_league_discuss_claim
						is_historical_focus_on = yes
					}
				}
			}
		}
	}
}

#Negotiate the state-Bulgaria side
country_event = {
	id = ww1_balkan.8
	title = ww1_balkan.8.t
	desc = ww1_balkan.8.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.7.a
		add_to_variable = {
			serbian_opinion = 10
		}
		random_state = {
			limit = {
				has_state_flag = balkan_league_discuss_claim
			}
			add_claim_by = SER
		}
		SER = {
			country_event = {
				id = ww1_balkan.9
				days = 5
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					225 = {
						has_state_flag = balkan_league_discuss_claim
					}
					759 = {
						has_state_flag = balkan_league_discuss_claim
						is_historical_focus_on = yes
					}
				}
			}
		}
	}
	option = {
		name = ww1_balkan.7.b
		subtract_from_variable = {
			serbian_opinion = -5
		}
		SER = {
			country_event = {
				id = ww1_balkan.10
				days = 2
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					106 = {
						has_state_flag = balkan_league_discuss_claim
					}
					203 = {
						has_state_flag = balkan_league_discuss_claim
						is_historical_focus_on = yes
					}
				}
			}
		}
	}
}

###other side accepts
country_event = {
	id = ww1_balkan.9
	title = ww1_balkan.9.t
	desc = ww1_balkan.9.d
	is_triggered_only = yes
	option = {
		name = ok
	}
}

###other side refuses
country_event = {
	id = ww1_balkan.10
	title = ww1_balkan.10.t
	desc = ww1_balkan.10.d
	is_triggered_only = yes
	option = {
		name =ok
	}
}

#Serbia refused autonomous Macedonia
country_event = {
	id = ww1_balkan.11
	title = ww1_balkan.11.t
	desc = ww1_balkan.11.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.11.a
		ai_chance = {
			factor = 10
		}
		set_country_flag = we_accept_negotiations
	}
	option = {
		name = ww1_balkan.11.b
		SER = {
			remove_mission = balkan_league_mission
			country_event = ww1_balkan.12
		}
		every_country = {
			remove_mission = balkan_league_mission
		}
		set_global_flag = balkan_league_fail
		ai_chance = {
			factor = 0
		}
	}
}

###Ferdinand breaks off negotiation
country_event = {
	id = ww1_balkan.12
	title = ww1_balkan.12.t
	desc = ww1_balkan.12.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.12.a
		hidden_effect = {
			country_event = {
				id = ww1_serbia.15
				days = 14
			}
		}
	}
}

#Negotiations success, placeholder event to invite Greeks as well
country_event = {
	id = ww1_balkan.13
	title = ww1_balkan.13.t
	desc = ww1_balkan.13.d
	is_triggered_only = yes
	# trigger = {
	# 	has_global_flag = balkan_league_success
	# }
	option = {
		name = ww1_balkan.13.a
		BUL = {
			add_to_faction = GRE
			add_state_claim = 757
			add_state_claim = 184
		}
		
		GRE = {
			add_state_claim = 826
			add_state_claim = 758
			add_state_claim = 803
			add_state_claim = 345
			add_state_claim = 731
		}
	}
}

##Revise the treaty
country_event = {
	id = ww1_balkan.14
	title = ww1_balkan.14.t
	desc = ww1_balkan.14.d
	is_triggered_only = yes
	option = {
		#Status quo
		name = ww1_balkan.14.a
		add_war_support = 0.05
	}
	option = {
		#Give up Macedonia for unconditional support in case Austria invades for Albania
		name = ww1_balkan.14.b
		BUL = {
			country_event = {
				id = ww1_balkan.15
				days = 2
			}
		}
	}
	#we go alone
	option = {
		name = ww1_balkan.14.c
		BUL = {
			country_event = {
				id = ww1_balkan.16
				days = 2
			}
		}
	}
}

#revise 2
country_event = {
	id = ww1_balkan.15
	title = ww1_balkan.15.t
	desc = ww1_balkan.15.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.15.a
		106 = {
			add_claim_by = BUL
		}
		give_guarantee = SER
	}
	option = {
		#refuse
		name = ww1_balkan.15.b
	}
}
#revise 3
country_event = {
	id = ww1_balkan.16
	title = ww1_balkan.16.t
	desc = ww1_balkan.16.d
	is_triggered_only = yes
	option = {
		name = ww1_balkan.16.a
		leave_faction = yes
		SER = {
			set_faction_leader = yes
		}
	}
}
