
anti_ottoman_balkan_coalition = {

	discuss_about_balkan_minor = {
		name = discuss_about_balkan_minor
		icon = generic_civil_support
		target_trigger = {
			FROM = {
				OR = {
					tag = GRE
					tag = SER
					tag = BUL
					tag = MNT
					# todo
					# capital_scope = {
					# 	# balkan
					# 	OR = {
					# 		region = 24
					# 		region = 25
					# 		region = 26
					# 		region = 202
					# 	}
					# }
				}
				OR = {
					is_subject_of = TUR
					has_capitulated = yes
					exists = no
				}
			}
		}
		visible = {
			is_in_array = {
				array = global.anti_ottoman_coalition_leaders
				value = THIS
			}
			NOT = {
				FROM = {
					has_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
				}
			}
		}
		ai_will_do = {
			factor = 10
		}
		available = {
			has_global_flag = not_alone_in_anti_ottoman_balkan_coalition
			NOT = {
				has_global_flag = is_discussing_about_balkan_minor
			}
			FROM = {
				OR = {
					is_subject_of = TUR
					has_capitulated = yes
					exists = no
				}
			}
		}
		days_re_enable = 14
		days_remove = 14
		fire_only_once = yes
		remove_effect = {
			clr_global_flag = is_discussing_about_balkan_minor
			if = {
				limit = {
					FROM = {
						tag = BUL
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS
							}
							is_in_array = {
								array = global.anti_ottoman_coalition_leaders
								value = THIS
							}
						}
					}
					country_event = {
						id = ww1_firstbalkan.13
						days = 2
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = GRE
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS
							}
							is_in_array = {
								array = global.anti_ottoman_coalition_leaders
								value = THIS
							}
						}
					}
					country_event = {
						id = ww1_firstbalkan.20
						days = 2
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = SER
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS
							}
							is_in_array = {
								array = global.anti_ottoman_coalition_leaders
								value = THIS
							}
						}
					}
					country_event = {
						id = ww1_firstbalkan.25
						days = 2
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = MNT
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS
							}
							is_in_array = {
								array = global.anti_ottoman_coalition_leaders
								value = THIS
							}
						}
					}
					country_event = {
						id = ww1_firstbalkan.37
						days = 2
					}
				}
			}
			if = {
				limit = {
					FROM = {
						NOT = {
							tag = SER
							tag = BUL
							tag = GRE
						}
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS
							}
							is_in_array = {
								array = global.anti_ottoman_coalition_leaders
								value = THIS
							}
						}
					}
					# todo
				}
			}
		}
		complete_effect = {
			set_global_flag = is_discussing_about_balkan_minor
			if = {
				limit = {
					FROM = {
						tag = BUL
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS 	
							}
							tag = ENG
						}
					}
					country_event = {
						id = ww1_firstbalkan.12
						days = 2
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = GRE
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS 	
							}
							tag = ENG
						}
					}
					country_event = {
						id = ww1_firstbalkan.19
						days = 2
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = SER
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_array = {
								array = global.anti_ottoman_coalition
								value = THIS 	
							}
							tag = ENG
						}
					}
					country_event = {
						id = ww1_firstbalkan.24
						days = 2
					}
				}
			}
			
		}
	}

	invite_country = {
		icon = GFX_decision_hol_exchange_intelligence_data
		name = invite_country
		target_trigger = {
			FROM = {
				is_major = yes
				is_subject = no
				NOT = {
					tag = TUR
					has_country_flag = dont_want_to_join_anti_ottoman_balkan_coalition
					is_in_array = {
						array = global.anti_ottoman_coalition
						value = FROM
					}
				}
			}
		}
		visible = {
			FROM = {
				is_subject = no
				NOT = { has_war_with = TUR }
			}
			is_in_array = { global.anti_ottoman_coalition_leaders = ROOT }
			has_global_flag = kis_firstbalkan_war
			has_global_flag = TUR_is_winning_balkan_war
			has_global_flag = organise_the_anti_ottoman_coalition
			NOT = {
				has_war_with = TUR
			}
		}
		available = {
			has_war = no
			is_subject = no
			FROM = {
				has_war = no
			}
		}
		days_remove = 2
		remove_effect = {
			FROM = {
				country_event = {
					id = ww1_firstbalkan.11
				}
			}
		}
		ai_will_do = {
			factor = 50
			# it is even irrelevant
			modifier = {
				factor = 0
				FROM = {
					capital_scope = {
						NOT = {
							is_on_continent = europe
						}
					}
				}
			}
			# pro-turkish countries won't helpful
			modifier = {
				factor = 0
				FROM = {
					OR = {
						is_in_faction_with = TUR
						has_guaranteed = TUR
						has_opinion = {
							target = TUR
							value > 70
						}
					}
				}
			}
		}
	}
	
	leave_the_coalition = {
		icon = GFX_decision_SWI_dismiss_council
		cost = 25
		allowed = {
			NOT = { tag = ENG }
		}
		visible = {
			is_in_array = { global.anti_ottoman_coalition = THIS }
			NOT = {
				has_country_flag = eight_coalition_master
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				any_other_country = {
					has_war_with = ROOT
					is_in_array = {
						array = global.anti_ottoman_coalition
						value = PREV
					}
				}
				add = 10
			}
			modifier = {
				any_other_country = {
					has_war_with = ROOT
					is_in_array = {
						array = global.anti_ottoman_coalition
						value = PREV
					}
					has_country_flag = eight_coalition_master
				}
				add = 100
			}
			modifier = {
				is_in_faction_with = TUR
				add = 100
			}
		}
		complete_effect = {
			remove_from_array = {
				array = global.anti_ottoman_coalition
				value = THIS
			}
			remove_ideas = anti_ottoman_balkan_coalition
		}
	}

	dissolve_the_coalition = {
		icon = GFX_decision_generic_break_treaty
		cost = 25
		visible = {
			is_in_array = { global.anti_ottoman_coalition_leaders = THIS }
			has_country_flag = eight_coalition_master
		}
		ai_will_do = {
			factor = 0
			modifier = {
				any_country = {
					has_war_with = ROOT
					is_in_array = {
						array = global.anti_ottoman_coalition
						value = PREV
					}
				}
				add = 10
			}	
			modifier = {
				BUL = {
					has_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
				}
				SER = {
					has_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
				}
				GRE = {
					has_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
				}
				add = 100
			}
			modifier = {
				any_country = {
					is_major = yes
					has_war_with = ROOT
				}
				add=1000
			}
			modifier = {
				has_war_with = TUR
				add = 1000
			}
			modifier = {
				has_global_flag = kis_war
				add = 1000
			}
		}
		complete_effect = {
			clr_global_flag = organise_the_anti_ottoman_coalition
			clear_array = global.anti_ottoman_coalition
			clear_array = global.anti_ottoman_coalition_leaders
		}
	}

	coalition_empty = {
		visible = {
			is_debug = yes
		}
		complete_effect = {
			clear_array = global.anti_ottoman_coalition
			clear_array = global.anti_ottoman_coalition_leaders
		}
	}

	coalition_send_rifles = {
		icon = ger_military_buildup
		allowed = {
			always = yes
		}
		target_trigger = {
			FROM = {
				OR = {
					has_war_with = TUR
					tag = TUR
				}
			}
		}
		available = {
			
		}
		visible = {
			is_in_array = {
				array = global.anti_ottoman_coalition
				value = PREV
			}
			FROM = {
				has_capitulated = no
			}
		}
		fire_only_once = no
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 1999 }
		}
		days_re_enable = 70
		custom_cost_text = 2000_infantry_equipment_1
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_equipment = { infantry_equipment < 4000 }
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0
				FROM = { has_government = communism }
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 0
				has_government = communism
				NOT = { FROM = { has_government = communism } }
			}
		}
		complete_effect = {
			army_experience = 5
			send_equipment = {
				target = FROM
				type = infantry_equipment
				amount = 2000
			}
			FROM = {
				country_event = ww1_firstbalkan.41
			}
		}
	}
}